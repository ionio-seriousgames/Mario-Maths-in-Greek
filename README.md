
#                                                  Αποθετήριο Κώδικα Πτυχιακής
  
  Το Mario and Maths σχεδιάστηκε και υλοποιήθηκε από τον Σωτίδη Χρήστο στα πλαίσια της εκπόνησης της πτυχιακής του εργασίας στο τμήμα πληροφορικής του Ιόνιου πανεπιστημίου. Το Mario and Maths αποτελεί ένα εκπαιδευτικό βιντεοπαιχνίδι που αντλεί το εκπαιδευτικό του περιεχόμενο από το μάθημα των μαθηματικών της ΣΤ' τάξης δημοτικού και της Α' τάξης γυμνασίαου. Πιο συγκεκριμένα επικεντρώνεται στην διδασκαλία του κεφαλαίου των κριτηρίων διαιρετότητας. 

###  Βασικά εργαλεία και προγραμματιστικές γλώσσες
  
  Το Mario and Maths δημιουργήθηκε με την βοήθεια των προγραμματιστικών γλωσσών JavaScript και HTML. Για να μπορέσει κάποιος να αναπτύξει ένα πρόγραμμα το πρώτο πράγμα που είναι απαραίτητο είναι ένας κειμενογράφος.  Έτσι για το συγκεκριμένο βιντεοπαιχνίδι έγινε χρήση του εργαλείου Brackets που προσφέρει αυτήν την δυνατότητα. Οποιοσδήποτε όμως κειμενογράφος είναι εξίσου λειτουργικός.
   Για την δημιουργία βιντεοπαιχνιδιών είναι επίσης απαραίτητη και μια μηχανή παιχνιδιών. Η μηχανή παιχνιδιών (Game Engine) είναι ένα λογισμικό το οποίο ειδικεύεται στην ανάπτυξη τέτοιου είδους εφαρμογών. Για το βιντεοπαιχνίδι της παρούσας εργασίας επιλέχθηκε το Phaser. Για την λειτουργία του Phaser είναι απαραίτητη η λήψη του JavaScript αρχείου που παρέχει όσα χρειαζόμαστε, μέσα από την ιστοσελίδα του. Το αρχείο αυτό (Phaser.js) πρέπει να συνδεθεί με τα υπόλοιπα αρχεία που θα δημιουργηθούν στην συνέχεια ώστε να έχουμε πρόσβαση στις λειτουργίες που μας προσφέρει το Phaser. Η σύνδεση αυτή γίνεται μέσω ενός HTML αρχείου που πρέπει να δημιουργήσουμε μέσω του κειμενογράφου. Το HTML αυτό αρχείο πέρα από την σύνδεση των JavaScript αρχείων, είναι απαραίτητο για την δυνατότητα λειτουργίας του βιντεοπαιχνιδιού στο διαδίκτυο. Τέλος ένα ακόμα βασικό εργαλείο που χρειάζεται για στην ανάπτυξη του βιντεοπαιχνιδιού είναι το Tiled το οποίο είναι υπεύθυνο για την σχεδίαση της πίστας που θα προστεθεί στο παιχνίδι. Το Tiled χωρίζει την όψη της πίστας σε κενά τετράγωνα και προσθέτοντας ένα αντικείμενο στο κάθε τετράγωνο, είμαστε σε θέση να σχεδιάσουμε την πίστα που θέλουμε.  
   
   ###   Φόρτωση απαραίτητων εικόνων και ήχων
   
   Πριν από τη δημιουργία των JavaScript αρχείων, είναι σημαντική η δημιουργία δύο φακέλων που θα περιέχουν τους ήχους και τις εικόνες αντίστοιχα, που θα χρησιμοποιηθούν στο παιχνίδι. Το πρώτο αρχείο που πρέπει να δημιουργηθεί λοιπόν είναι αυτό που θα ενημερώνει το παιχνίδι σε ποιον φάκελο βρίσκεται η κάθε εικόνα ή ήχος ώστε να είναι σε θέση να τα εισάγει σωστά. Το αρχείο αυτό είναι το Preloader.js. Επίσης μέσω αυτού του αρχείου εισάγεται και η πίστα που έχει φτιαχτεί στο πρόγραμμα Tiled που αναφέρθηκε παραπάνω. Μετά το Preloader.js πρέπει να δημιουργηθεί ένα αρχείο μέσω του οποίου θα εμφανίζεται στον χρήστη η μπάρα φόρτωσης, όταν ο χρήστης επιλέξει να εκκινήσει το βιντεοπαιχνίδι. Αυτή η ενέργεια εκτελείτε μέσω του αρχείου Boot.js. 
   
   ###   Μενού - Οθόνη πλήκτρων - Αφήγηση 
   
   Το επόμενο αρχείο στη σειρά δημιουργίας είναι το MainMenu.js το οποίο είναι υπεύθυνο για την εμφάνιση και τη λειτουργία του βασικού μενού. Σε αυτό το σημείο δημιουργούνται τα κουμπιά Play και Controls, καθώς και το background που εμφανίζεται στο μενού. Το κουμπί Play πρέπει να οδηγεί τον χρήστη στην αφήγηση του παιχνιδιού και το κουμπί Controls πρέπει να τον οδηγεί στην οθόνη με τα πλήκτρα που χρειάζεται για να παίξει. Για την εμφάνιση τη οθόνης αυτής είναι υπεύθυνο το αρχείο Controls.js που εμφανίζει επίσης και το κουμπί Play ώστε να κατευθύνει και αυτό τον χρήστη στην αφήγηση, εφόσον έχει πλέον ενημερωθεί για τα πλήκτρα. Για την ύπαρξη της αφήγησης, πρέπει να φτιαχτεί το αρχείο afigisi.js. Σε αυτό το αρχείο φορτώνονται αρχικά οι εικόνες που εμφανίζουν στον χρήστη τις πληροφορίες που χρειάζεται για την εξέλιξη και ολοκλήρωση του παιχνιδιού. Η κάθε εικόνα μένει ενεργή για τέσσερα δευτερόλεπτα και έπειτα εμφανίζεται η επόμενη. Δημιουργείται όμως και ένα κουμπί με όνομα Skip button ώστε ο χρήστης να μπορεί να μεταφερθεί στην επιλογή αριθμού κριτηρίου διαιρετότητας αν δεν επιθυμεί να παρακολουθήσει ολόκληρη την αφήγηση. Όταν λοιπόν ο χρήστης πατήσει το συγκεκριμένο κουμπί ή απλά η αφήγηση φτάσει στο τέλος της, δημιουργούνται μέσω αυτού του αρχείου τα κουμπιά που περιέχουν τους αριθμούς 2,3,5 και 10. Έτσι ο χρήστης επιλέγει το κριτήριο διαιρετότητας που επιθυμεί και μετά δημιουργούνται δύο νέα κουμπιά που αντιστοιχούν στους δύο βασικούς χαρακτήρες (Mario, Luigi). Μόλις ο χρήστης επιλέξει το αντίστοιχο κουμπί μεταφέρεται στην κυρίως πίστα του παιχνιδιού για την λειτουργία της οποίας είναι υπεύθυνο το αρχείο Level1.js.
   
   ###   Εκκίνηση κυρίως πίστας
   
   Στο αρχείο Level1.js υλοποιείται το μεγαλύτερο κομμάτι του παιχνιδιού και αφορά την πίστα στην οποία κινείται ο χρήστης. Έτσι οι πρώτες ενέργειες του αρχείου αυτού είναι η εμφάνιση του χάρτη που έχει δημιουργηθεί μέσω του Tiled, η εμφάνιση του background και η εμφάνιση του χαρακτήρα που έχει επιλέξει ο χρήστης προηγουμένως μαζί με τα αντίστοιχα animations που σχηματίζονται όταν αυτός κινείται. Επίσης εμφανίζονται τα αντίστοιχα sprites των διάφορων χαρακτήρων και εχθρών που προσθέτονται στο παιχνίδι μέσω των εικόνων που έχων φορτωθεί πριν από το αρχείο Preloader.js. Ορισμένοι χαρακτήρες αντιστοιχούνται με μόνο μια εικόνα, ενώ σε κάποιους άλλους προστίθεται και κάποιας μορφής κίνηση. Πραγματοποιείται ακόμα η τυχαία εμφάνιση των κυκλικών πλαισίων που περιέχουν τους αριθμούς τους οποίους καλείται να επιλέξει ο χρήστης ως σωστές επιλογές για να κερδίσει το παιχνίδι. Επίσης στο πάνω αριστερά μέρος της οθόνης γίνεται η εμφάνιση των μεταβλητών που διαχειρίζονται το score και τις ζωές ώστε να είναι συνεχώς ενημερωμένος ο χρήστης. Επιπροσθέτως ξεκινά και η shooting λειτουργία που επιτρέπει στον χρήστη να σκοτώσει όποιον αριθμό θεωρεί λανθασμένη επιλογή. 
   
   ###   Έλεγχοι ροής παιχνιδιού
   
   Αφού εμφανιστούν όλα τα παραπάνω στην πίστα, αρχίζει ένας συνεχής έλεγχος διαφόρων λειτουργιών σε κάθε καρέ (frame) της εξέλιξης του παιχνιδιού. Ένας από αυτούς τους ελέγχους είναι η σύγκρουση (collision) του χαρακτήρα που ελέγχει ο χρήστης με κάποιο κυκλικό πλαίσιο αριθμού. Όταν λοιπόν ο χρήστης συγκρουστεί με έναν αριθμό, πραγματοποιούνται μια σειρά από ενέργειες. Αν ο αριθμός αυτός αποτελεί σωστή απάντηση τότε το score αυξάνεται κατά εκατό, ενεργοποιείται ο αντίστοιχος ήχος σωστής επιλογής, ο αριθμός μεταφέρεται στο πάνω μέρος της οθόνης, αυξάνεται το ποσό σωστών απαντήσεων και ελέγχεται αν αυτό ισούται με πέντε ώστε ο χρήστης να κερδίσει μια ζωή. Σε περίπτωση που ο αριθμός αποτελεί λανθασμένη επιλογή τότε ακούγεται ο αντίστοιχος ήχος λάθος επιλογής, το πλαίσιο διαγράφεται, αυξάνεται το ποσό των λανθασμένων επιλογών, ο αριθμός αυτός αποθηκεύεται και ο χρήστης μεταφέρεται στην πίστα λάθους. Στην πίστα λάθους εμφανίζεται ένα μήνυμα που ενημερώνει τον χρήστη για το ότι αυτός ο αριθμός δεν διαιρείται με τον αριθμό που παίζει και πως πρέπει να βρει την σωστή απάντηση για να συνεχίσει. Στην νέα αυτή πίστα γίνεται αλλαγή του background και κάποιων ακόμα εικόνων ώστε να ταιριάζει με την περίσταση. Εκεί εμφανίζονται και οι υπόλοιποι αριθμοί από τους 2,3,5 και 10 σε κυκλικά πλαίσια ώστε να επιλέξει ο χρήστης τον σωστό και να επαναφερθεί στο σημείο που βρισκόταν στην βασική πίστα. Σε αυτό το σημείο γίνονται αντίστοιχοι έλεγχοι σύγκρουσης με τον κάθε αριθμό μέχρι να επιλεχθεί ο σωστός από τον χρήστη. 
   Ένας ακόμα έλεγχος που γίνεται σε κάθε frame του παιχνιδιού αφορά την σύγκρουση του βασικού χαρακτήρα με άλλους χαρακτήρες όπως οι εχθροί ή κάποιοι βοηθητικοί χαρακτήρες όπως η κινούμενη γέφυρα και ο έλικας που βοηθούν τον χρήστη να περάσει ορισμένα εμπόδια. Οι ενέργειες που πραγματοποιούνται όταν έρθει σε επαφή με τους εχθρούς είναι η αφαίρεση μιας ζωής και ο αντίστοιχος ήχος, καθώς και η μεταφορά του χαρακτήρα σε ένα συγκεκριμένο σημείο πιο πίσω στην πίστα. Ένας ακόμα σημαντικός έλεγχος που γίνεται, αφορά την shooting λειτουργία και αφορά την σύγκρουση της σφαίρας με κάποιον κυκλικό πλαίσιο αριθμού. Σε αυτήν την περίπτωση το πλαίσιο διαγράφεται και ο χρήστης κερδίζει μια ζωή αν ο αριθμός αποτελεί λάθος επιλογή. 
   
   ###   Τερματισμός παιχνιδιού - Οθόνες αποτελεσμάτων
   
   Ο τελευταίος έλεγχος σύγκρουσης που γίνεται, αφορά τον τερματισμό. Αν ο χρήστης έχει επιλέξει σωστά δέκα αριθμούς, εμφανίζεται η οθόνη νίκης, ενώ σε άλλη περίπτωση η οθόνη ήττας. Η διαχείριση αυτών των δύο οθονών γίνεται με την δημιουργία των αρχείων gameover.js και loss.js αντίστοιχα. Αυτά τα αρχεία είναι υπεύθυνα για την εμφάνιση των εκπαιδευτικών αποτελεσμάτων του χρήστη. Έτσι συλλέγοντας τις πληροφορίες από το αρχείο Level1.js ενημερώνουν τον χρήστη για το ποσό των σωστών απαντήσεων που πέτυχε, το συνολικό ποσό διαθέσιμων σωστών απαντήσεων που υπήρχαν στην πίστα, το ποσό των λανθασμένων επιλογών που έκανε, καθώς και ποιους αριθμούς συγκεκριμένα επέλεξε λάθος. Επίσης εμφανίζουν ένα μήνυμα ενθάρρυνσης στον χρήστη αλλά και ένα κουμπί Play Again που πατηθεί, τον μεταφέρει στο αρχικό μενού. Τέλος η οθόνη ήττας εμφανίζεται και σε περίπτωση που χρήστης φτάσει τις μηδέν ζωές.  
   
#                                                   Mario and Maths

Mario and Maths was designed and implemented by Christos Sotidis as part of his graduate work in the IT department of Ionian University. Mario and Maths is an educational video game that draws its educational content from the mathematics lesson of the 6th grade of Greek elementary schools and the 1st grade gymnasium. More specifically, it focuses on teaching the chapter of the divisibility criteria.

### Tools and programming languages used

Mario and Maths was created with the help of JavaScript and HTML programming languages. In order to be able to develop a program the first thing that is necessary is a text editor. So for this video game, the Brackets tool has been used. However, any text editor is just as functional. A game engine is also needed to create video games. The Game Engine is a software that specializes in developing such applications. Phaser was selected as the game engine of this particular project. In order for Phaser to work the file Phaser.Js is required. This file (Phaser.js) must be linked to the other files that will be created in order to access the features offered by Phaser. This link is through an HTML file that we need to create through the text editor. This HTML file is connecting the JavaScript files, and is also necessary for the game to work over the net. Finally, another key tool needed to develop the video game is Tiled, which is responsible for designing the game level to be added to the game. Tiled divides an image of the level into empty squares and by adding an object to each square we are able to design the game stage that we want.

### Loading the necessery pictures and sounds

Before creating the JavaScript files it is important to create two folders containing the sounds and images that will be used. The first file that needs to be created is the one that provides information about the folder location of each image or sound, in order to import them correctly. This file is Preloader.js. Also via this file we are importing the game level that we made with Tiled. After Preloader.js a file should be created by which the load bar will be displayed to the user when the user chooses to start the video game. This action is performed through the Boot.js.

### Menu-Keypad Screen-Narration

The next file in the creation order is MainMenu.js, which is responsible for displaying and operating the main menu. At this point, the Play and Controls buttons and the background that appears in the menu are created. The Play button must lead the user to the narrative of the game and the Controls button must lead to the screen with controls. The Controls.js file is responsible for displaying this screen, which also displays the Play button to direct this user to the narrative as long as it has been updated for the keys. The afigisi.js is responsible for the narrative. In that file, the information that is needed for the competition of the game is stored, in the form of images. When the game runs, each picture stays on the screen for four seconds and then is followed by the next one. The player is also presented with a skip button, so that they can move ahead if they do not want to follow the entire narrative. When the user clicks the “skip” button the narration ends. The buttons containing the numbers 2,3,5 and 10 are also created through this file, at the end of the narration. After the end of the narration, the user chooses the desired divisibility criterion and then is prompted to choose between the two main characters (Mario and Luigi). Once the user selects the corresponding button, it is moved to the main track of the game. The main part of the game corresponds to the file Level1.js.

### Starting the game – Main Stage

The Level1.js file implements the largest part of the game and concerns the game stage on which the user moves. So the first actions of this file are to display the map created through Tiled, display the background, and display the character previously selected by the user along with the corresponding animations that are formed when he moves. Also the corresponding sprites of the various characters and enemies added to the game are displayed through images uploaded before the Preloader.js file. Some characters are associated with only one image, while others are added to some form of motion. The random circular frames containing the numbers that the user has to select as the right choices to win the game are also randomly displayed. Also, in the upper left part of the screen, the variables that manage the score and lives are displayed to keep the user constantly informed. In addition, the shooting function starts, allowing the user to kill any number that considers the wrong option.
Some characters are associated with only one image, while others have some form of motion added to them. The random circular frames containing the numbers that the user has to select as the right choices to win the game are also randomly displayed. Also, in the upper left part of the screen, the variables that manage the score and lives are displayed to keep the user constantly informed. In addition, the shooting function starts, allowing the user to kill any number that considers the wrong option.

### Game flow controls

After all of the above appears on the level, a continuous check of various functions in each frame of the game begins. One of these checks is the collision of the character controlled by the user with a circular number box. So, when the user collides with a number, a series of actions takes place. If this number is a correct answer then the score is increased by one hundred points, the corresponding sound of the correct selection is activated, the number is transferred to the top of the screen, the correct answer is increased and checked if it is equal to five, so that the user can gain a life. If the number is an incorrect option then the corresponding error selection sounds, the box is deleted, the amount of incorrect choices is increased, the number is stored, and the user is transferred to the error level. In the error level a message is displayed informing the user that this number is not divided by the number they have chosen to play with and, that they have to find the correct answer to continue. In this new track there is a change of background and some more pictures to fit the occasion. There also appear the remaining numbers of 2,3,5 and 10 in circular frames so that the user can choose the correct one and then be returned to the basic level of the game. At this point, collision checks are performed on each number until the correct one is selected by the user. One more check made on each frame of the game involves the collision of the base character with other characters such as enemies or some auxiliary characters such as the moving bridge and propeller that help the user to pass certain obstacles. The actions that take place when it comes to enemies is to remove a life and the corresponding sound, as well as to transfer the character to a specific point back to the level. Another important check regards the shooting function and more specifically the collision of the projectile with the circular frame of each number. In this case the number is deleted and the user wins a life if the number is the wrong choice.


### End of the game - Results screens

The latest collision control that is done is about ending the game. If the user has correctly selected ten numbers, the winning screen is displayed, otherwise the defeat screen is displayed. Managing these two screens is done by creating the gameover.js and loss.js files respectively. These files are responsible for displaying the user's educational results as well.

