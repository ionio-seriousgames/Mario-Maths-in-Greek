
#                                                  Αποθετήριο Κώδικα Πτυχιακής
  
  Το Mario and Maths σχεδιάστηκε και υλοποιήθηκε από τον Σωτίδη Χρήστο στα πλαίσια της εκπόνησης της πτυχιακής του εργασίας στο τμήμα πληροφορικής του Ιόνιου πανεπιστημίου. Το Mario and Maths αποτελεί ένα εκπαιδευτικό βιντεοπαιχνίδι που αντλεί το εκπαιδευτικό του περιεχόμενο από το μάθημα των μαθηματικών της ΣΤ' τάξης δημοτικού και της Α' τάξης γυμνασίαου. Πιο συγκεκριμένα επικεντρώνεται στην διδασκαλία του κεφαλαίου των κριτηρίων διαιρετότητας. 

###  Βασικά εργαλεία και προγραμματιστικές γλώσσες
  
  Το Mario and Maths δημιουργήθηκε με την βοήθεια των προγραμματιστικών γλωσσών JavaScript και HTML. Για να μπορέσει κάποιος να αναπτύξει ένα πρόγραμμα το πρώτο πράγμα που είναι απαραίτητο είναι ένας κειμενογράφος.  Έτσι για το συγκεκριμένο βιντεοπαιχνίδι έγινε χρήση του εργαλείου Brackets που προσφέρει αυτήν την δυνατότητα. Οποιοσδήποτε όμως κειμενογράφος είναι εξίσου λειτουργικός.
   Για την δημιουργία βιντεοπαιχνιδιών είναι επίσης απαραίτητη και μια μηχανή παιχνιδιών. Η μηχανή παιχνιδιών (Game Engine) είναι ένα λογισμικό το οποίο ειδικεύεται στην ανάπτυξη τέτοιου είδους εφαρμογών. Για το βιντεοπαιχνίδι της παρούσας εργασίας επιλέχθηκε το Phaser. Για την λειτουργία του Phaser είναι απαραίτητη η λήψη του JavaScript αρχείου που παρέχει όσα χρειαζόμαστε, μέσα από την ιστοσελίδα του. Το αρχείο αυτό (Phaser.js) πρέπει να συνδεθεί με τα υπόλοιπα αρχεία που θα δημιουργηθούν στην συνέχεια ώστε να έχουμε πρόσβαση στις λειτουργίες που μας προσφέρει το Phaser. Η σύνδεση αυτή γίνεται μέσω ενός HTML αρχείου που πρέπει να δημιουργήσουμε μέσω του κειμενογράφου. Το HTML αυτό αρχείο πέρα από την σύνδεση των JavaScript αρχείων, είναι απαραίτητο για την δυνατότητα λειτουργίας του βιντεοπαιχνιδιού στο διαδίκτυο. Τέλος ένα ακόμα βασικό εργαλείο που χρειάζεται για στην ανάπτυξη του βιντεοπαιχνιδιού είναι το Tiled το οποίο είναι υπεύθυνο για την σχεδίαση της πίστας που θα προστεθεί στο παιχνίδι. Το Tiled χωρίζει την όψη της πίστας σε κενά τετράγωνα και προσθέτοντας ένα αντικείμενο στο κάθε τετράγωνο, είμαστε σε θέση να σχεδιάσουμε την πίστα που θέλουμε.  
   
   ###   Φόρτωση απαραίτητων εικόνων και ήχων
   
   Πριν από τη δημιουργία των JavaScript αρχείων, είναι σημαντική η δημιουργία δύο φακέλων που θα περιέχουν τους ήχους και τις εικόνες αντίστοιχα, που θα χρησιμοποιηθούν στο παιχνίδι. Το πρώτο αρχείο που πρέπει να δημιουργηθεί λοιπόν είναι αυτό που θα ενημερώνει το παιχνίδι σε ποιον φάκελο βρίσκεται η κάθε εικόνα ή ήχος ώστε να είναι σε θέση να τα εισάγει σωστά. Το αρχείο αυτό είναι το Preloader.js. Επίσης μέσω αυτού του αρχείου εισάγεται και η πίστα που έχει φτιαχτεί στο πρόγραμμα Tiled που αναφέρθηκε παραπάνω. Μετά το Preloader.js πρέπει να δημιουργηθεί ένα αρχείο μέσω του οποίου θα εμφανίζεται στον χρήστη η μπάρα φόρτωσης, όταν ο χρήστης επιλέξει να εκκινήσει το βιντεοπαιχνίδι. Αυτή η ενέργεια εκτελείτε μέσω του αρχείου Boot.js. 
   
   ###   Μενού - Οθόνη πλήκτρων - Αφήγηση 
   
   Το επόμενο αρχείο στη σειρά δημιουργίας είναι το MainMenu.js το οποίο είναι υπεύθυνο για την εμφάνιση και τη λειτουργία του βασικού μενού. Σε αυτό το σημείο δημιουργούνται τα κουμπιά Play και Controls, καθώς και το background που εμφανίζεται στο μενού. Το κουμπί Play πρέπει να οδηγεί τον χρήστη στην αφήγηση του παιχνιδιού και το κουμπί Controls πρέπει να τον οδηγεί στην οθόνη με τα πλήκτρα που χρειάζεται για να παίξει. Για την εμφάνιση τη οθόνης αυτής είναι υπεύθυνο το αρχείο Controls.js που εμφανίζει επίσης και το κουμπί Play ώστε να κατευθύνει και αυτό τον χρήστη στην αφήγηση, εφόσον έχει πλέον ενημερωθεί για τα πλήκτρα. Για την ύπαρξη της αφήγησης, πρέπει να φτιαχτεί το αρχείο afigisi.js. Σε αυτό το αρχείο φορτώνονται αρχικά οι εικόνες που εμφανίζουν στον χρήστη τις πληροφορίες που χρειάζεται για την εξέλιξη και ολοκλήρωση του παιχνιδιού. Η κάθε εικόνα μένει ενεργή για τέσσερα δευτερόλεπτα και έπειτα εμφανίζεται η επόμενη. Δημιουργείται όμως και ένα κουμπί με όνομα Skip button ώστε ο χρήστης να μπορεί να μεταφερθεί στην επιλογή αριθμού κριτηρίου διαιρετότητας αν δεν επιθυμεί να παρακολουθήσει ολόκληρη την αφήγηση. Όταν λοιπόν ο χρήστης πατήσει το συγκεκριμένο κουμπί ή απλά η αφήγηση φτάσει στο τέλος της, δημιουργούνται μέσω αυτού του αρχείου τα κουμπιά που περιέχουν τους αριθμούς 2,3,5 και 10. Έτσι ο χρήστης επιλέγει το κριτήριο διαιρετότητας που επιθυμεί και μετά δημιουργούνται δύο νέα κουμπιά που αντιστοιχούν στους δύο βασικούς χαρακτήρες (Mario, Luigi). Μόλις ο χρήστης επιλέξει το αντίστοιχο κουμπί μεταφέρεται στην κυρίως πίστα του παιχνιδιού για την λειτουργία της οποίας είναι υπεύθυνο το αρχείο Level1.js.
   
   ###   Εκκίνηση κυρίως πίστας
   
   Στο αρχείο Level1.js υλοποιείται το μεγαλύτερο κομμάτι του παιχνιδιού και αφορά την πίστα στην οποία κινείται ο χρήστης. Έτσι οι πρώτες ενέργειες του αρχείου αυτού είναι η εμφάνιση του χάρτη που έχει δημιουργηθεί μέσω του Tiled, η εμφάνιση του background και η εμφάνιση του χαρακτήρα που έχει επιλέξει ο χρήστης προηγουμένως μαζί με τα αντίστοιχα animations που σχηματίζονται όταν αυτός κινείται. Επίσης εμφανίζονται τα αντίστοιχα sprites των διάφορων χαρακτήρων και εχθρών που προσθέτονται στο παιχνίδι μέσω των εικόνων που έχων φορτωθεί πριν από το αρχείο Preloader.js. Ορισμένοι χαρακτήρες αντιστοιχούνται με μόνο μια εικόνα, ενώ σε κάποιους άλλους προστίθεται και κάποιας μορφής κίνηση. Πραγματοποιείται ακόμα η τυχαία εμφάνιση των κυκλικών πλαισίων που περιέχουν τους αριθμούς τους οποίους καλείται να επιλέξει ο χρήστης ως σωστές επιλογές για να κερδίσει το παιχνίδι. Επίσης στο πάνω αριστερά μέρος της οθόνης γίνεται η εμφάνιση των μεταβλητών που διαχειρίζονται το score και τις ζωές ώστε να είναι συνεχώς ενημερωμένος ο χρήστης. Επιπροσθέτως ξεκινά και η shooting λειτουργία που επιτρέπει στον χρήστη να σκοτώσει όποιον αριθμό θεωρεί λανθασμένη επιλογή. 
   
   ###   Έλεγχοι ροής παιχνιδιού
   
   Αφού εμφανιστούν όλα τα παραπάνω στην πίστα, αρχίζει ένας συνεχής έλεγχος διαφόρων λειτουργιών σε κάθε καρέ (frame) της εξέλιξης του παιχνιδιού. Ένας από αυτούς τους ελέγχους είναι η σύγκρουση (collision) του χαρακτήρα που ελέγχει ο χρήστης με κάποιο κυκλικό πλαίσιο αριθμού. Όταν λοιπόν ο χρήστης συγκρουστεί με έναν αριθμό, πραγματοποιούνται μια σειρά από ενέργειες. Αν ο αριθμός αυτός αποτελεί σωστή απάντηση τότε το score αυξάνεται κατά εκατό, ενεργοποιείται ο αντίστοιχος ήχος σωστής επιλογής, ο αριθμός μεταφέρεται στο πάνω μέρος της οθόνης, αυξάνεται το ποσό σωστών απαντήσεων και ελέγχεται αν αυτό ισούται με πέντε ώστε ο χρήστης να κερδίσει μια ζωή. Σε περίπτωση που ο αριθμός αποτελεί λανθασμένη επιλογή τότε ακούγεται ο αντίστοιχος ήχος λάθος επιλογής, το πλαίσιο διαγράφεται, αυξάνεται το ποσό των λανθασμένων επιλογών, ο αριθμός αυτός αποθηκεύεται και ο χρήστης μεταφέρεται στην πίστα λάθους. Στην πίστα λάθους εμφανίζεται ένα μήνυμα που ενημερώνει τον χρήστη για το ότι αυτός ο αριθμός δεν διαιρείται με τον αριθμό που παίζει και πως πρέπει να βρει την σωστή απάντηση για να συνεχίσει. Στην νέα αυτή πίστα γίνεται αλλαγή του background και κάποιων ακόμα εικόνων ώστε να ταιριάζει με την περίσταση. Εκεί εμφανίζονται και οι υπόλοιποι αριθμοί από τους 2,3,5 και 10 σε κυκλικά πλαίσια ώστε να επιλέξει ο χρήστης τον σωστό και να επαναφερθεί στο σημείο που βρισκόταν στην βασική πίστα. Σε αυτό το σημείο γίνονται αντίστοιχοι έλεγχοι σύγκρουσης με τον κάθε αριθμό μέχρι να επιλεχθεί ο σωστός από τον χρήστη. 
   Ένας ακόμα έλεγχος που γίνεται σε κάθε frame του παιχνιδιού αφορά την σύγκρουση του βασικού χαρακτήρα με άλλους χαρακτήρες όπως οι εχθροί ή κάποιοι βοηθητικοί χαρακτήρες όπως η κινούμενη γέφυρα και ο έλικας που βοηθούν τον χρήστη να περάσει ορισμένα εμπόδια. Οι ενέργειες που πραγματοποιούνται όταν έρθει σε επαφή με τους εχθρούς είναι η αφαίρεση μιας ζωής και ο αντίστοιχος ήχος, καθώς και η μεταφορά του χαρακτήρα σε ένα συγκεκριμένο σημείο πιο πίσω στην πίστα. Ένας ακόμα σημαντικός έλεγχος που γίνεται, αφορά την shooting λειτουργία και αφορά την σύγκρουση της σφαίρας με κάποιον κυκλικό πλαίσιο αριθμού. Σε αυτήν την περίπτωση το πλαίσιο διαγράφεται και ο χρήστης κερδίζει μια ζωή αν ο αριθμός αποτελεί λάθος επιλογή. 
   
   ###   Τερματισμός παιχνιδιού - Οθόνες αποτελεσμάτων
   
   Ο τελευταίος έλεγχος σύγκρουσης που γίνεται, αφορά τον τερματισμό. Αν ο χρήστης έχει επιλέξει σωστά δέκα αριθμούς, εμφανίζεται η οθόνη νίκης, ενώ σε άλλη περίπτωση η οθόνη ήττας. Η διαχείριση αυτών των δύο οθονών γίνεται με την δημιουργία των αρχείων gameover.js και loss.js αντίστοιχα. Αυτά τα αρχεία είναι υπεύθυνα για την εμφάνιση των εκπαιδευτικών αποτελεσμάτων του χρήστη. Έτσι συλλέγοντας τις πληροφορίες από το αρχείο Level1.js ενημερώνουν τον χρήστη για το ποσό των σωστών απαντήσεων που πέτυχε, το συνολικό ποσό διαθέσιμων σωστών απαντήσεων που υπήρχαν στην πίστα, το ποσό των λανθασμένων επιλογών που έκανε, καθώς και ποιους αριθμούς συγκεκριμένα επέλεξε λάθος. Επίσης εμφανίζουν ένα μήνυμα ενθάρρυνσης στον χρήστη αλλά και ένα κουμπί Play Again που πατηθεί, τον μεταφέρει στο αρχικό μενού. Τέλος η οθόνη ήττας εμφανίζεται και σε περίπτωση που χρήστης φτάσει τις μηδέν ζωές.  
   
[Επιστροφή στην αγγλική έκδοση](https://github.com/ionio-seriousgames/mario-maths)

